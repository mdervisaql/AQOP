# ๐ง WhatsApp Integration - ุชุดุฎูุต ูุญู ุงููุดุงูู

## ๐ ูุงุฆูุฉ ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (wp_options):

```
1. aqop_whatsapp_phone_id          โ ุฑูู ุงููุงุชู ูู Meta
2. aqop_whatsapp_access_token      โ ุชููู ุงููุตูู
3. aqop_whatsapp_business_id       โ ูุนุฑูู ุงูุญุณุงุจ ุงูุชุฌุงุฑู
4. aqop_whatsapp_business_name     โ ุงุณู ุงูุญุณุงุจ ุงูุชุฌุงุฑู (ุงุฎุชูุงุฑู)
5. aqop_whatsapp_webhook_token     โ ุชููู ุงูุชุญูู ูู ุงูู Webhook
```

---

## ๐ ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู Meta (Facebook):

### ุงูุฎุทูุฉ 1: ุงูุญุตูู ุนูู Access Token
- ุงุฐูุจ ุฅูู: https://www.facebook.com/developers/
- ุงูุณุฎ: **Temporary Access Token** ุฃู **Permanent Token**

### ุงูุฎุทูุฉ 2: ูุนุฑูู ุงูุญุณุงุจ ุงูุชุฌุงุฑู (WABA ID)
- ุงุฐูุจ ุฅูู: WhatsApp Business Account Settings
- ุงุจุญุซ ุนู: **Account ID**

### ุงูุฎุทูุฉ 3: ูุนุฑูู ุฑูู ุงููุงุชู (Phone Number ID)
- ูู ุฅุนุฏุงุฏุงุช WhatsApp Business API
- ุงุจุญุซ ุนู: **Phone Number ID**

### ุงูุฎุทูุฉ 4: ุฑูู ุงููุงุชู ุงููุนูู
- ุฑูู WhatsApp ุงูุฐู ุณุชุณุชุฎุฏูู: **+201023894135** (ูู ุงูุตูุฑุฉ)

---

## ๐ธ ุงูุจูุงูุงุช ุงูุชู ุชุญุชุงุฌ ุฃู ุชูุฑุณููุง ูู:

### ูู WordPress Admin:

**1. ุงุฐูุจ ุฅูู ุงูุฅุนุฏุงุฏุงุช:**
```
WordPress Admin โ AQOP Settings โ WhatsApp Configuration
```

**ุฎุฐ ุตูุฑุฉ (Screenshot) ูู:**
- [ ] WhatsApp Phone ID field
- [ ] WhatsApp Access Token field
- [ ] WhatsApp Business ID field
- [ ] WhatsApp Webhook Token field

**ุฃู ูู Database directly:**

```bash
# ุฅุฐุง ูุงู ูุฏูู ูุตูู SSHุ ุงุทูุจ ูุฐุง ูู ูุถูู ุงูููุจ:
mysql -u username -p database_name
SELECT option_name, option_value FROM wp_options WHERE option_name LIKE 'aqop_whatsapp%';
```

---

## ๐ด ุฃุณุจุงุจ ุงูุฎุทุฃ ุงูุดุงุฆุนุฉ:

### ุงูุณุจุจ 1: **Tokens ูุงุฑุบุฉ ุฃู ูุงูุตุฉ**
```php
// ูู class-whatsapp-integration.php line 46-47:
$this->phone_id = get_option('aqop_whatsapp_phone_id');
$this->access_token = get_option('aqop_whatsapp_access_token');

// ุฅุฐุง ูุงูุช ูุงุฑุบุฉ โ ุณููุดู ุงูุฅุฑุณุงู
```

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
2. ุชุญูู ูู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชููู
3. ุงุญุตู ุนูู ุชููู ุฌุฏูุฏ ูู Meta

### ุงูุณุจุจ 2: **ุฑูู ุงููุงุชู ุจุตูุบุฉ ุฎุงุทุฆุฉ**
```
ุงูุตูุบุฉ ุงูุตุญูุญุฉ: +201023894135 (ูุจุฏุฃ ุจู + ู ุงูููุฏ ุงูุฏููู)
ุงูุตูุบุฉ ุงูุฎุงุทุฆุฉ: 001023894135 ุฃู 01023894135
```

**ุงูุญู:**
```php
// ูู class-whatsapp-integration.php ุงูุชุญูู:
if (empty($phone_number)) {
    return new WP_Error('invalid_phone', 'Phone number is empty');
}

// ูุฌุจ ุฃู ูููู: +[country_code][phone_number]
```

### ุงูุณุจุจ 3: **ุงูุงุชุตุงู ูุน Meta API ูุงุดู**
```php
// ูู send_message() function:
return $this->make_request('messages', 'POST', $payload);
// ูุฐุง ูุฏ ููุดู ุฅุฐุง ูุงู:
// - ุงูุชููู ููุชูู ุงูุตูุงุญูุฉ
// - IP ุงูุฎุงุฏู ุนูู blacklist
// - ุฑูู ุงููุงุชู ุบูุฑ ูุณุฌู
```

**ุงูุญู:**
ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ูู ุงูุฅุนุฏุงุฏุงุช

### ุงูุณุจุจ 4: **ุฑูู ุงููุงุชู ุบูุฑ ูุฑุชุจุท ุจู Business Account**
```
ุงูุนููู ูู ูุชู ุฅูุดุงุก ูุญุงุฏุซุฉ ูุนู ูู ูุจู
โ Meta API ูุชุทูุจ ุฃู ูุฑุณู ุงููุณุชูุจู ุฑุณุงูุฉ ุฃููุงู (ุฃู ุงุณุชุฎุฏุงู templates)
```

**ุงูุญู:**
ุงุณุชุฎุฏู Template Messages ุจุฏูุงู ูู Text Messages

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุงุชุตุงู:

### ุงูุทุฑููุฉ 1: ูู ุงููุงุฌูุฉ (ุฅุฐุง ูุงูุช ููุฌูุฏุฉ)
```
ุงุฐูุจ ุฅูู: Settings โ WhatsApp
ุงุถุบุท ุนูู: [Test Connection] button
```

### ุงูุทุฑููุฉ 2: ูู Database/Logs
```
ุชุญูู ูู: wp-content/debug.log
ุงุจุญุซ ุนู: "WhatsApp" ุฃู "Failed to send"
```

### ุงูุทุฑููุฉ 3: From Frontend Console
```javascript
// ุงูุชุญ F12 Developer Tools
// ูู Console ุงุทุจุน:
console.log(aqopLeads);
// ุชุญูู ูู:
// - ajaxurl
// - nonce
// - root (API URL)
```

---

## ๐๏ธ ุงูุฎุทูุงุช ูุญู ุงููุดููุฉ:

### ุงูุฎุทูุฉ 1: ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ
```
โ WhatsApp Phone ID ููุฌูุฏ ูููููุก
โ Access Token ููุฌูุฏ ูููููุก
โ Business ID ููุฌูุฏ ูููููุก
โ ุฑูู ุงููุงุชู ุตุญูุญ ุงูุตูุบุฉ
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุฑ ุงูุงุชุตุงู
```
โ ุงุถุบุท ุนูู Test Connection
โ ุชุญูู ูู ุงูุฑุณุงูุฉ (ูุฌุญ ุฃู ูุดู)
โ ุงูุฑุฃ ุฑุณุงูุฉ ุงูุฎุทุฃ ุจุชูุนู
```

### ุงูุฎุทูุฉ 3: ุชุญูู ูู ุงูุฃุฎุทุงุก
```
โ ุงูุชุญ debug.log
โ ุงุจุญุซ ุนู ุขุฎุฑ 100 ุณุทุฑ
โ ุงุจุญุซ ุนู ูููุฉ "whatsapp" ุฃู "error"
```

### ุงูุฎุทูุฉ 4: ุชุญูู ูู ุตูุบุฉ ุงูุฑูู
```
ุงูุตูุฑุฉ ุชุธูุฑ: +201023894135
ูุฐุง ุตูุบุฉ ุตุญูุญุฉ โ

ููู ุชุฃูุฏ:
- ูุจุฏุฃ ุจู +
- ูุชุจุนู ุงูููุฏ ุงูุฏููู (20 ููุตุฑ)
- ุซู ุงูุฑูู ุจุฏูู 0
```

### ุงูุฎุทูุฉ 5: ุงุญุตู ุนูู ุชููู ุฌุฏูุฏ
```
ุฅุฐุง ุงูุชูุช ุตูุงุญูุฉ ุงูุชููู:
1. ุงุฐูุจ ุฅูู https://developers.facebook.com/
2. ุฃุนุฏ ุฅูุดุงุก ุชููู ุฌุฏูุฏ
3. ุงุฎุชุฑ "Long-lived token" (ุตูุงุญูุฉ 60 ููู)
4. ุฃุฏุฎูู ูู ุงูุฅุนุฏุงุฏุงุช
```

---

## ๐ธ ุงูุตูุฑ ุงูุชู ุชุญุชุงุฌ ุฃู ุชูุฑุณููุง:

### ุตูุฑุฉ 1: ุฅุนุฏุงุฏุงุช WhatsApp
**ุงุฐูุจ ุฅูู:**
- WordPress Dashboard
- Settings โ WhatsApp
- ุฎุฐ ุตูุฑุฉ ูุงููุฉ ููุฅุนุฏุงุฏุงุช
- ูุง ุชูุธูุฑ ุงูู Tokens ูุงููุฉ (ุฃูุงู)

### ุตูุฑุฉ 2: Debug Log
**ููู:**
- `/wp-content/debug.log`
- ุฎุฐ ุขุฎุฑ 50 ุณุทุฑ
- ุงุจุญุซ ุนู ุฃุฎุทุงุก WhatsApp

### ุตูุฑุฉ 3: Database Options
**ุฅุฐุง ูุงู ูุฏูู phpmyadmin:**
- `wp_options` table
- ุงุจุญุซ ุนู: `aqop_whatsapp%`
- ุชุฃูุฏ ูู ุฃู ุงูููู ููุฌูุฏุฉ

### ุตูุฑุฉ 4: ุงูุฎุทุฃ ูู Console
**ุนูุฏ ูุญุงููุฉ ุงูุฅุฑุณุงู:**
- ุงูุชุญ F12
- ุงุถุบุท ุนูู Network tab
- ุงุจุนุซ ุฑุณุงูุฉ
- ุดูู ุงูู Request ู Response
- ุฎุฐ ุตูุฑุฉ ููู Error message

---

## ๐ ูุนูููุงุช ุงูุฃูุงู:

**ุนูุฏ ุฅุฑุณุงู ุงูุตูุฑ:**
- โ ูุง ุชูุธูุฑ ูู ุงูุชููู (ุฃูู ูุขุฎุฑ 4 ุฃุญุฑู ููุท)
- โ ูุง ุชูุธูุฑ Private Keys
- โ ููููู ุฅุธูุงุฑ:
  - ุฃูู 4 ุฃุญุฑู ูู ุงูุชููู
  - ุขุฎุฑ 4 ุฃุญุฑู ูู ุงูุชููู
  - ุฃู ุงุชุฑู `XXXX` ูู ุงููุณุท

**ูุซุงู:**
```
Access Token: abc1XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX5678
Business ID: 123456789
Phone ID: 987654321
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงููุทููุจุฉ ููู ุงูุขู:

1. **ุงูุชุญ ุตูุญุฉ Settings ูู WordPress:**
   ```
   wp-admin โ Settings/Configuration
   ```

2. **ุงุจุญุซ ุนู WhatsApp Settings:**
   ```
   ุฑุจูุง ุชุญุช:
   - Settings
   - AQOP Settings
   - Integrations
   - WhatsApp Configuration
   ```

3. **ุฎุฐ ุตูุฑุฉ ุดุงููุฉ ุชุธูุฑ:**
   - [ ] WhatsApp Phone ID (ุฅุฏุฎุงู)
   - [ ] Access Token (ุฅุฏุฎุงู)
   - [ ] Business ID (ุฅุฏุฎุงู)
   - [ ] ุฃู ุฑุณุงุฆู ุฎุทุฃ

4. **ุฃู (ุฅุฐุง ูุงู ูุฏูู SSH):**
   ```bash
   cat wp-content/debug.log | tail -100
   ```
   ุซู ุดุงุฑู ุขุฎุฑ 50 ุณุทุฑ

5. **ุฃู (ุฅุฐุง ูุงู ูุฏูู phpmyadmin):**
   - ุงุฐูุจ ุฅูู `wp_options`
   - ุงุจุญุซ ุนู `aqop_whatsapp`
   - ุฎุฐ ุตูุฑุฉ

---

## ๐ ูููุฐุฌ ุงูุชูุฑูุฑ ุงููุทููุจ:

ุนูุฏูุง ุชูุฑุณู ุงููุนูููุงุชุ ุฃุฑุณู ูู:

```
ุงูุญุงูุฉ ุงูุญุงููุฉ:
โโโโโโโโโโโโโโโโโโ
1. ูู ุงูุฅุนุฏุงุฏุงุช ููุฌูุฏุฉุ
   [ ] ูุนู / [ ] ูุง

2. ุงูุฃุฎุทุงุก ุงูุชู ุชุฑุงูุง:
   - ุฑุณุงูุฉ ูู ุงููุงุฌูุฉ: _________
   - ุฑุณุงูุฉ ูู Console: _________
   - ุฑุณุงูุฉ ูู Debug Log: _________

3. ุงูุจูุงูุงุช ุงููุฏุฎูุฉ:
   - Phone ID: ููุฌูุฏ [ ] ูุงุฑุบ [ ]
   - Access Token: ููุฌูุฏ [ ] ูุงุฑุบ [ ]
   - Business ID: ููุฌูุฏ [ ] ูุงุฑุบ [ ]

4. ูุนูููุงุช ุฃุฎุฑู:
   - ุงุณู ุงูุฎุงุฏู: _________
   - ูุณุฎุฉ WordPress: _________
   - ูุณุฎุฉ PHP: _________
```

---

**ููุง ูุฏูุช ูุฐู ุงููุนูููุงุชุ ุณุฃุณุชุทูุน:**
1. โ ุชุญุฏูุฏ ุงูุณุจุจ ุจุฏูุฉ
2. โ ุฅุนุทุงุคู ุงูุญู ุงููุจุงุดุฑ
3. โ ุชุนุฏูู ุงูููุฏ ุฅุฐุง ูุฒู ุงูุฃูุฑ
4. โ ุงุฎุชุจุงุฑ ุงูุญู ูุนู

ุงูุชุธุฑ ุฑุณุงูุชู! ๐
