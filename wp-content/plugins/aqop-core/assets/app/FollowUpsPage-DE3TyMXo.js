import{j as e}from"./query-vendor-CG4xf7JE.js";import{r as l,L as m}from"./react-vendor-Ch0kAUMy.js";import{N as p}from"./Navigation-B2sBVjrF.js";import{d as g,c as h}from"./communications-XQojI1Lv.js";import{f as y}from"./helpers-Os691a1s.js";import{L as u}from"./index-DcCoICHm.js";function f(){const[r,d]=l.useState([]),[i,o]=l.useState(!0),[s,a]=l.useState("pending"),n=async()=>{o(!0);try{const t=await g({status:s});d(t||[])}catch(t){console.error("Error loading follow-ups:",t)}finally{o(!1)}};l.useEffect(()=>{n()},[s]);const c=async t=>{try{await h(t),n()}catch(x){console.error("Error completing follow-up:",x)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Follow-up Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a("pending"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${s==="pending"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Pending"}),e.jsx("button",{onClick:()=>a("completed"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${s==="completed"?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:"Completed"}),e.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${s==="all"?"bg-gray-100 text-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:"All"})]})]}),i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(u,{size:"md"})}):r.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"No tasks found."})}):e.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Status"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Due Date"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Lead"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Task"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:e.jsx("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:y(t.due_date)}),e.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.jsx(m,{to:`/leads/${t.lead_id}`,className:"text-blue-600 hover:text-blue-900",children:t.lead_name}),e.jsx("div",{className:"text-xs text-gray-400",children:t.lead_phone})]}),e.jsxs("td",{className:"px-3 py-4 text-sm text-gray-500",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-gray-500",children:t.description})]}),e.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:t.status==="pending"&&e.jsx("button",{onClick:()=>c(t.id),className:"text-green-600 hover:text-green-900",children:"Complete"})})]},t.id))})]})})]})}function C(){return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(p,{currentPage:"follow-ups"}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Follow-up Tasks"}),e.jsx(f,{})]})})]})}export{C as default};
