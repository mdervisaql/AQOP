import{j as e}from"./query-vendor-CG4xf7JE.js";import{r as h}from"./react-vendor-Ch0kAUMy.js";import{u as g,L as p}from"./index-DcCoICHm.js";import{a as j}from"./useLeads-BthcpCpB.js";import{N as f}from"./Navigation-B2sBVjrF.js";import{L as v}from"./LeadCard-Cq47qKLX.js";import"./leads-CQ_k3CbU.js";import"./helpers-Os691a1s.js";function M(){const{user:n}=g(),[r,o]=h.useState({status:"",priority:"",search:""}),{data:d,isLoading:a,error:l,refetch:c}=j(r,!0,{refetchInterval:6e4}),t=d?.data?.results||[],i=(s,u)=>{o(x=>({...x,[s]:u}))},m=()=>{o({status:"",priority:"",search:""})};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(f,{currentPage:"my-leads"}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Leads"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Manage your assigned leads - ",n?.display_name]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",id:"search",value:r.search,onChange:s=>i("search",s.target.value),placeholder:"Search leads...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status",value:r.status,onChange:s=>i("status",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"qualified",children:"Qualified"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"lost",children:"Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"priority",value:r.priority,onChange:s=>i("priority",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Clear Filters"})})]})}),a&&e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(p,{size:"lg",text:"Loading your leads..."})}),l&&!a&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800",children:l.message||"Failed to load leads"})]})}),!a&&!l&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No leads found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.status||r.priority||r.search?"Try adjusting your filters":"You have no leads assigned yet"})]}),!a&&!l&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:t.length})," lead",t.length!==1?"s":""]}),e.jsxs("button",{onClick:()=>c(),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsx(v,{lead:s,showAssignee:!1},s.id))})]})]})})]})}export{M as default};
